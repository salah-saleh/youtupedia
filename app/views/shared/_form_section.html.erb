<%# Form Section Component
    Provides consistent styling for form sections with loading state support

    Parameters:
    - title: String (optional) - Section title
    - subtitle: String (optional) - Additional context below title
    - form_classes: String (optional) - Additional CSS classes for the form element
%>

<%= render "shared/section", title: local_assigns[:title], subtitle: local_assigns[:subtitle] do %>
  <div data-controller="loading"
       data-action="turbo:submit-start->loading#startLoading
                   turbo:submit-end->loading#stopLoading
                   turbo:before-fetch-request->loading#startLoading
                   turbo:before-fetch-response->loading#stopLoading">
    <%= form_with(**local_assigns.except(:title, :subtitle, :form_classes),
                  class: "flex flex-col sm:flex-row items-start gap-3 #{local_assigns[:form_classes]}",
                  data: { loading_target: "form" }) do |f| %>
      <%= yield(f) %>
    <% end %>
  </div>
<% end %>