<%# Pagination component that can be reused across the application %>
<%# Required local variables for standard pagination: %>
<%# - current_page: Current page number %>
<%# - total_pages: Total number of pages %>
<%# Required local variables for YouTube pagination: %>
<%# - next_token: Token for the next page %>
<%# - prev_token: Token for the previous page %>
<%# Optional local variables: %>
<%# - path: Base path for pagination links %>
<%# - params: Additional params to preserve in pagination links (default: {}) %>
<%# - class_names: Additional CSS classes for the pagination container (default: '') %>
<%# - youtube_pagination: Boolean to indicate if using YouTube API pagination (default: false) %>
<%# - turbo_frame_id: String for the turbo frame ID (defaults to "summaries_content") %>

<%
  params ||= {}
  class_names ||= ''
  youtube_pagination ||= false
  turbo_frame_id ||= 'summaries_content'

  # Helper to build pagination URL with params
  def build_pagination_url(path, params: {}, page_token: nil)
    url_params = params.dup
    url_params[:page_token] = page_token if page_token
    path + "?" + url_params.to_query
  end
%>

<nav class="flex items-center justify-between border-t border-gray-200 dark:border-gray-600 px-4 sm:px-0 pt-3 <%= class_names %>" aria-label="Pagination">
  <div class="flex flex-1 justify-between sm:justify-end gap-x-3">
    <% if youtube_pagination %>
      <%# YouTube-style pagination with just prev/next %>
      <div class="flex gap-x-2">
        <% if prev_token.present? %>
          <%= link_to build_pagination_url(path, page_token: prev_token, params: params), class: "relative inline-flex items-center rounded-md bg-white dark:bg-gray-800 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700", data: { turbo_frame: turbo_frame_id, turbo_action: "advance" } do %>
            <svg class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
            </svg>
            Previous
          <% end %>
        <% end %>

        <% if next_token.present? %>
          <%= link_to build_pagination_url(path, page_token: next_token, params: params), class: "relative inline-flex items-center rounded-md bg-white dark:bg-gray-800 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700", data: { turbo_frame: turbo_frame_id, turbo_action: "advance" } do %>
            Next
            <svg class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
            </svg>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <%# Standard pagination with page numbers %>
      <div class="flex gap-x-2">
        <%# First page button %>
        <% if current_page > 1 %>
          <%= link_to build_pagination_url(path, params: params.merge(page: 1)), class: "relative inline-flex items-center rounded-md bg-white dark:bg-gray-800 px-2 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700", title: "First page", data: { turbo_frame: turbo_frame_id, turbo_action: "advance" } do %>
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M15.79 14.77a.75.75 0 01-1.06.02L10.232 10l4.938-3.71a.75.75 0 111.04 1.08l-3.57 3.37 3.57 3.37a.75.75 0 01-.02 1.06zm-6 0a.75.75 0 01-1.06.02L4.232 10l4.938-3.71a.75.75 0 111.04 1.08L6.64 10l3.57 3.37a.75.75 0 01-.02 1.06z" clip-rule="evenodd" />
            </svg>
          <% end %>
        <% end %>

        <%# Previous page button %>
        <% if current_page > 1 %>
          <%= link_to build_pagination_url(path, params: params.merge(page: current_page - 1)), class: "relative inline-flex items-center rounded-md bg-white dark:bg-gray-800 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700", data: { turbo_frame: turbo_frame_id, turbo_action: "advance" } do %>
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
            </svg>
            Previous
          <% end %>
        <% end %>

        <%# Page numbers %>
        <div class="hidden sm:flex gap-x-2">
          <% start_page = [1, current_page - 2].max %>
          <% end_page = [start_page + 4, total_pages].min %>
          <% start_page = [1, end_page - 4].max if end_page - start_page < 4 %>

          <% if start_page > 1 %>
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-300">...</span>
          <% end %>

          <% (start_page..end_page).each do |page| %>
            <% if page == current_page %>
              <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-purple-600 dark:bg-purple-500 rounded-md">
                <%= page %>
              </span>
            <% else %>
              <%= link_to build_pagination_url(path, params: params.merge(page: page)), class: "relative inline-flex items-center rounded-md bg-white dark:bg-gray-800 px-4 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700", data: { turbo_frame: turbo_frame_id, turbo_action: "advance" } do %>
                <%= page %>
              <% end %>
            <% end %>
          <% end %>

          <% if end_page < total_pages %>
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-300">...</span>
          <% end %>
        </div>

        <%# Next page button %>
        <% if current_page < total_pages %>
          <%= link_to build_pagination_url(path, params: params.merge(page: current_page + 1)), class: "relative inline-flex items-center rounded-md bg-white dark:bg-gray-800 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700", data: { turbo_frame: turbo_frame_id, turbo_action: "advance" } do %>
            Next
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
            </svg>
          <% end %>
        <% end %>

        <%# Last page button %>
        <% if current_page < total_pages %>
          <%= link_to build_pagination_url(path, params: params.merge(page: total_pages)), class: "relative inline-flex items-center rounded-md bg-white dark:bg-gray-800 px-2 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700", title: "Last page", data: { turbo_frame: turbo_frame_id, turbo_action: "advance" } do %>
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4.21 14.77a.75.75 0 01.02-1.06L8.168 10 4.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02zm6 0a.75.75 0 01.02-1.06L14.168 10 10.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
            </svg>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</nav>