<%# Sidebar Component
    Provides main navigation links for authenticated users.

    Dependencies:
    - Authentication helpers
    - Tailwind CSS
    - Dark mode support
    - Icon helper (video_camera, channel, magnifying_glass, cog icons)

    Features:
    - Responsive design (desktop sidebar)
    - Dark mode support
    - Active link states
    - Section grouping
    - Accessible navigation
%>

<%# Desktop Sidebar %>
<div class="hidden lg:block w-64 flex-shrink-0 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4">
  <%# Main Navigation %>
  <nav class="space-y-1">
    <%= link_to summaries_path,
        class: "block px-3 py-2 text-gray-700 dark:text-gray-300
                hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md
                #{current_page?(summaries_path) ? 'bg-gray-100 dark:bg-gray-700' : ''}" do %>
      <div class="flex items-center">
        <%= render_icon :video_camera, class: "w-5 h-5 mr-3" %>
        <span>Summaries</span>
      </div>
    <% end %>

    <%= link_to channels_path,
        class: "block px-3 py-2 text-gray-700 dark:text-gray-300
                hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md
                #{current_page?(channels_path) ? 'bg-gray-100 dark:bg-gray-700' : ''}" do %>
      <div class="flex items-center">
        <%= render_icon :channel, class: "w-5 h-5 mr-3" %>
        <span>Channels</span>
      </div>
    <% end %>

    <%= link_to search_index_path,
        class: "block px-3 py-2 text-gray-700 dark:text-gray-300
                hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md
                #{current_page?(search_index_path) ? 'bg-gray-100 dark:bg-gray-700' : ''}" do %>
      <div class="flex items-center">
        <%= render_icon :magnifying_glass, class: "w-5 h-5 mr-3" %>
        <span>Search</span>
      </div>
    <% end %>
  </nav>

  <%# Divider %>
  <div class="border-t border-gray-200 dark:border-gray-700 my-4"></div>

  <%# Settings %>
  <nav class="space-y-1">
    <%= link_to settings_path,
        class: "block px-3 py-2 text-gray-700 dark:text-gray-300
                hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md
                #{current_page?(settings_path) ? 'bg-gray-100 dark:bg-gray-700' : ''}" do %>
      <div class="flex items-center">
        <%= render_icon :cog, class: "w-5 h-5 mr-3" %>
        <span>Settings</span>
      </div>
    <% end %>

    <%# Dark Mode Toggle %>
    <div class="px-3 py-2">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <%= render_icon :moon, class: "w-5 h-5 mr-3 text-gray-500 dark:text-gray-400" %>
          <span class="text-gray-700 dark:text-gray-300">Theme</span>
        </div>
        <button type="button"
                data-controller="theme"
                data-action="theme#toggle"
                class="relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent bg-gray-200 dark:bg-gray-700 transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"
                role="switch"
                aria-checked="false">
          <span class="sr-only">Toggle dark mode</span>
          <span data-theme-target="indicator"
                class="pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out translate-x-0 dark:translate-x-5">
            <span class="absolute inset-0 flex h-full w-full items-center justify-center transition-opacity dark:opacity-0">
              <%= render_icon :sun, class: "h-3 w-3 text-gray-400" %>
            </span>
            <span class="absolute inset-0 flex h-full w-full items-center justify-center transition-opacity opacity-0 dark:opacity-100">
              <%= render_icon :moon, class: "h-3 w-3 text-purple-600" %>
            </span>
          </span>
        </button>
      </div>
    </div>

    <%# User Section %>
    <% if user_signed_in? %>
      <div class="px-3 py-2">
        <div class="flex items-center text-gray-700 dark:text-gray-300">
          <div class="w-5 h-5 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs mr-3">
            <%= Current.user.email_address.first.upcase %>
          </div>
          <span class="truncate" title="<%= Current.user.email_address %>">
            <%= Current.user.email_address %>
          </span>
        </div>
      </div>
      <%= button_to session_path, method: :delete,
          class: "w-full px-3 py-2 text-left text-gray-700 dark:text-gray-300
                  hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md" do %>
        <div class="flex items-center">
          <%= render_icon :arrow_right, class: "w-5 h-5 mr-3" %>
          <span>Sign Out</span>
        </div>
      <% end %>
    <% else %>
      <%= link_to new_registration_path,
          class: "block px-3 py-2 text-gray-700 dark:text-gray-300
                  hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md" do %>
        <div class="flex items-center">
          <%= render_icon :user, class: "w-5 h-5 mr-3" %>
          <span>Sign Up</span>
        </div>
      <% end %>
      <%= link_to new_session_path,
          class: "block px-3 py-2 text-gray-700 dark:text-gray-300
                  hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md" do %>
        <div class="flex items-center">
          <%= render_icon :arrow_right, class: "w-5 h-5 mr-3" %>
          <span>Sign In</span>
        </div>
      <% end %>
    <% end %>
  </nav>
</div>